---
import View360 from "./360 viewer/View360.astro";

// Define the floor plan types and their corresponding images
interface FloorPlan {
  type: string;
  bedrooms: string;
  style: string;
  image: string;
}

const floorPlans: FloorPlan[] = [
  { 
    type: "01", 
    bedrooms: "4BHK", 
    style: "DUPLEX",
    image: "/images/virtualExperience/vr_duplex_type01.jpg"
  },
  { 
    type: "02", 
    bedrooms: "4BHK", 
    style: "DUPLEX",
    image: "/images/virtualExperience/vr_duplex_type02.jpg"
  },
  { 
    type: "03", 
    bedrooms: "4BHK", 
    style: "DUPLEX",
    image: "/images/virtualExperience/vr_duplex_type03.jpg"
  },
  { 
    type: "04", 
    bedrooms: "4BHK", 
    style: "COMBINED",
    image: "/images/virtualExperience/vr_combined_type04.jpg"
  },
  { 
    type: "01", 
    bedrooms: "3BHK", 
    style: "",
    image: "/images/virtualExperience/vr_3bhk_type01.jpg"
  },
  { 
    type: "02", 
    bedrooms: "2BHK", 
    style: "",
    image: "/images/virtualExperience/vr_2bhk_type02.jpg"
  },
];


---

<div class="bg-white containerw pt-52 pb-40">
  <h2 class="text-white bg-darkColor font42 pl-4 sm:pl-7 font-bold mb-4 sm:mb-8">Virtual Experience</h2>
  
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-12 justify-items-center px-4 sm:px-7">
    {floorPlans.map((plan, index) => (
      <div 
        class="relative overflow-hidden cursor-pointer group w-full mx-auto bg-[#053451]"
        onclick={`openViewer(${index})`}
      >
        <div class="relative h-64 sm:h-80 lg:h-96">
          <img 
            src={plan.image || '/images/blueprint-bg.jpg'} 
            alt={`${plan.bedrooms} ${plan.style} Type ${plan.type}`}
            class="absolute inset-0 w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"
          />
          <div class="absolute inset-0 bg-navy/70"></div>
        </div>
      </div>
    ))}
  </div>
</div>

<!-- 360 Viewer Modal
<div id="viewerModal" class="fixed inset-0 z-50 hidden">
  <div class="absolute inset-0 bg-black bg-opacity-75 h-full w-full flex items-center justify-center">
    <div class="relative w-[60%] h-[80dvh] flex justify-center items-center">
      <button 
        onclick="closeViewer()" 
        class="absolute -right-20 -top-20 z-10 text-white font60 p-2 rounded-full"
      >
        Ã—
      </button>
      <div id="viewer360Container" class="w-full h-full flex justify-center items-center">
        <View360 client:load />
      </div>
    </div>
  </div>
</div>

<script is:inline>
  window.openViewer = function(index) {
    const modal = document.getElementById('viewerModal');
    modal.classList.remove('hidden');
  }

  window.closeViewer = function() {
    const modal = document.getElementById('viewerModal');
    modal.classList.add('hidden');
  }
</script> -->

